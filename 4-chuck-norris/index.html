<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.97.3"><meta name=description content="A Camel K Workshop using OpenShift"><meta name=author content="Rui, Tala, Fabian, Adrian"><link rel=icon href=https://camel-k-integration-workshop.github.io/images/favicon.png type=image/png><title>Task 2 - Using Kamelets :: Camel K Workshop</title><link href=https://camel-k-integration-workshop.github.io/css/nucleus.css?1650892493 rel=stylesheet><link href=https://camel-k-integration-workshop.github.io/css/fontawesome-all.min.css?1650892493 rel=stylesheet><link href=https://camel-k-integration-workshop.github.io/css/hybrid.css?1650892493 rel=stylesheet><link href=https://camel-k-integration-workshop.github.io/css/featherlight.min.css?1650892493 rel=stylesheet><link href=https://camel-k-integration-workshop.github.io/css/perfect-scrollbar.min.css?1650892493 rel=stylesheet><link href=https://camel-k-integration-workshop.github.io/css/auto-complete.css?1650892493 rel=stylesheet><link href=https://camel-k-integration-workshop.github.io/css/atom-one-dark-reasonable.css?1650892493 rel=stylesheet><link href=https://camel-k-integration-workshop.github.io/css/theme.css?1650892493 rel=stylesheet><link href=https://camel-k-integration-workshop.github.io/css/tabs.css?1650892493 rel=stylesheet><link href=https://camel-k-integration-workshop.github.io/css/hugo-theme.css?1650892493 rel=stylesheet><link href=https://camel-k-integration-workshop.github.io/css/theme-red.css?1650892493 rel=stylesheet><script src=https://camel-k-integration-workshop.github.io/js/jquery-3.3.1.min.js?1650892493></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}:not(pre)>code+span.copy-to-clipboard{display:none}</style></head><body data-url=https://camel-k-integration-workshop.github.io/4-chuck-norris/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=https://camel-k-integration-workshop.github.io><img src=https://camel-k-integration-workshop.github.io/images/camelk_knative.svg></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=https://camel-k-integration-workshop.github.io/js/lunr.min.js?1650892493></script>
<script type=text/javascript src=https://camel-k-integration-workshop.github.io/js/auto-complete.js?1650892493></script>
<script type=text/javascript>var baseurl="https://camel-k-integration-workshop.github.io"</script><script type=text/javascript src=https://camel-k-integration-workshop.github.io/js/search.js?1650892493></script></div><section id=homelinks><ul><li><a class=padding href=https://camel-k-integration-workshop.github.io/><i class="fas fa-home"></i> Home</a></li></ul></section><div class=highlightable><ul class=topics><li data-nav-id=/1-intro/ title=Intro class=dd-item><a href=https://camel-k-integration-workshop.github.io/1-intro/>Intro</a></li><li data-nav-id=/2-prepare-cluster/ title="Prepare your cluster" class=dd-item><a href=https://camel-k-integration-workshop.github.io/2-prepare-cluster/>Prepare your cluster</a></li><li data-nav-id=/3-hello-world/ title="Task 1 - Hello World" class=dd-item><a href=https://camel-k-integration-workshop.github.io/3-hello-world/>Task 1 - Hello World</a></li><li data-nav-id=/4-chuck-norris/ title="Task 2 - Using Kamelets" class="dd-item
parent
active"><a href=https://camel-k-integration-workshop.github.io/4-chuck-norris/>Task 2 - Using Kamelets</a></li><li data-nav-id=/5-serverless/ title="Task 3 - Serverless integration with Camel K" class=dd-item><a href=https://camel-k-integration-workshop.github.io/5-serverless/>Task 3 - Serverless integration with Camel K</a></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://camel-k-integration-workshop.github.io><i class="fas fa-home"></i> Homepage</a></li></ul></section><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=https://camel-k-integration-workshop.github.io/></a> > Task 2 - Using Kamelets</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><ul><li></li></ul></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Task 2 - Using Kamelets</h1><p><a href=https://github.com/camel-k-integration-workshop/camel-k-workshop/tree/main/02-kamelets-examples>This example</a> demonstrates how to create a simple Chuck Norris Kamelet source and how to integrate it with Telegram.<br>Our goal is to connect to a website containing Chuck Norris jokes via API, get a joke every few seconds and print it in the terminal first,<br>and then also send it to our Telegram channel. Architecture of this example is shown below:</p><figure><img src="../images/camelk_workshop02_arch.png?width=50pc&classes=border,shadow"><figcaption><h4>Click image to enlarge</h4></figcaption></figure><div class="notices warning"><p>If you still don&rsquo;t have your Telegram account, bot or chat ID, please refer to the first chapter &ldquo;Intro&rdquo; for the instructions on how to get them.</p></div><h4 id=what-are-kamelets>What are Kamelets?</h4><p>Kamelets are custom resources that hide the complexity of connecting to external systems behind a simple interface, which contains all the information needed to instantiate them, even for users who are not familiar with Camel. You can install kamelets on an OpenShift cluster and use in Camel K integrations.</p><p>As kamelets look like any other Camel component, experienced developers will enjoy using them as much, and will quickly browse through all the already available, predefined Catalog Kamelets. It is of course possible to create your own kamelets too!
You can define your own library of reusable kamelets for your organisation. And desirebly, contribute them to the Camel community.</p><p>Camel provides more than 300 components out of the box, therefore we can create a kamelet in a simple way, making use of one of the components already available. Most of the Kamelets available in the official catalog, are simple ones having only a remapping of the kamelet properties into Camel endpoint parameters.</p><p>Kamelets have two kinds of connectors, <strong>sources</strong> and <strong>sinks</strong>. Sources produce the data and sinks consume the data and optionally produce a response.</p><h4 id=lets-get-started>Let&rsquo;s get started</h4><p>☐ <code>oc new-project kamelet-example</code> - create a new project for the second example<br>☐ <code>kamel init chuck-norris-source.kamelet.yaml</code> - initiate a simple Kamelet template. this is the code you will see once you opened the newly created file:</p><figure><img src="../images/kamelet_example.png?width=35pc&classes=border,shadow"><figcaption><h4>Click image to enlarge</h4></figcaption></figure><blockquote><p>You can also use <code>kamel init xxxx-source.kamelet.yaml / xxxx-sink.kamelet.yaml</code> to instantiate a kamelet template for creating your own custom kamelet of a given type.</p></blockquote><p>☐ Modify your kamelet, or copy the entire kamelet code from: <a href=https://github.com/camel-k-integration-workshop/camel-k-workshop/blob/main/02-kamelets-examples/chuck-norris-source.kamelet.yaml>chuck-norris-source.kamelet.yaml</a><br>☐ <code>oc apply -f chuck-norris-source.kamelet.yaml</code> - use <code>kamel</code> CLI to create the chuck norris source kamelet on your OpenShift instance<br>☐ <code>oc get kamelets</code> - check if the chuck norris source is ready<br>☐ Create <a href=https://github.com/camel-k-integration-workshop/camel-k-workshop/blob/main/02-kamelets-examples/chuck-norris-example.groovy>chuck-norris-example.groovy</a> file:</p><figure><img src="../images/integration_chuck.png?width=60pc&classes=border,shadow"><figcaption><h4>Click image to enlarge</h4></figcaption></figure><p>☐ <code>kamel run chuck-norris-example.groovy --dev</code>- run the integration using chuck norris kamelet in the &ldquo;dev&rdquo; mode</p><blockquote><p>You should see the jokes appearing in the terminal.</p></blockquote><div class="notices tip"><p>Groovy is just one of many programming languages, that you can use to write integration files. All the supported languages for Camel K integrations can be found <a href=https://camel.apache.org/camel-k/1.8.x/languages/languages.html>here.</a></p></div><p>☐ Change the <code>.to('log:info')</code> to <code>.to("telegram:bots?authorizationToken=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&chatID=XXXXXXXXXXXXX")</code> - simply comment the line number 2 and uncomment the line number 3 in <a href=https://github.com/camel-k-integration-workshop/camel-k-workshop/blob/main/02-kamelets-examples/chuck-norris-example.groovy>chuck-norris-example.groovy</a><br>☐ Provide your bot Authorization Token and chat ID in places marked by <code>X</code> characters.<br>☐ Save the file. After saving, your integration will reload automatically, because we are running it in &ldquo;dev&rdquo; mode.</p><blockquote><p>Your Telegram bot should now be sending you Chuck Norris jokes!</p></blockquote><figure><img src="../images/telegram_joke.jpeg?width=30pc&classes=border,shadow"><figcaption><h4>Click image to enlarge</h4></figcaption></figure><p>☐ Verify that each 10 seconds you are getting a new joke.<br>☐ <code>oc delete project chuck-norris</code> - clean up the project</p><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=https://camel-k-integration-workshop.github.io/3-hello-world/ title="Task 1 - Hello World"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=https://camel-k-integration-workshop.github.io/5-serverless/ title="Task 3 - Serverless integration with Camel K" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=https://camel-k-integration-workshop.github.io/js/clipboard.min.js?1650892493></script>
<script src=https://camel-k-integration-workshop.github.io/js/perfect-scrollbar.min.js?1650892493></script>
<script src=https://camel-k-integration-workshop.github.io/js/perfect-scrollbar.jquery.min.js?1650892493></script>
<script src=https://camel-k-integration-workshop.github.io/js/jquery.sticky.js?1650892493></script>
<script src=https://camel-k-integration-workshop.github.io/js/featherlight.min.js?1650892493></script>
<script src=https://camel-k-integration-workshop.github.io/js/highlight.pack.js?1650892493></script>
<script>hljs.initHighlightingOnLoad()</script><script src=https://camel-k-integration-workshop.github.io/js/modernizr.custom-3.6.0.js?1650892493></script>
<script src=https://camel-k-integration-workshop.github.io/js/learn.js?1650892493></script>
<script src=https://camel-k-integration-workshop.github.io/js/hugo-learn.js?1650892493></script>
<script src=https://camel-k-integration-workshop.github.io/mermaid/mermaid.js?1650892493></script>
<script>mermaid.initialize({startOnLoad:!0})</script></body></html>